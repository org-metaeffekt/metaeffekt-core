#macro(assetTable $templateRegistry $componentNotice $artifactNotice $assets)
<title>$utils.getText(
  "inventory-report-bom.short.assets-covering") $report.xmlEscapeString($componentNotice.getComponentName())</title>
<table otherprops="wide">
    <title>$utils.getText(
      "inventory-report-bom.short.assets-of-component") $componentNotice.getComponentName()$reportContext.inContextOf()$artifactNotice.getDiscriminator()</title>
    <tgroup cols="3">
        <colspec colname="COLSPEC0" colnum="1" colwidth="50*"/>
        <colspec colname="COLSPEC1" colnum="2" colwidth="25*"/>
        <colspec colname="COLSPEC2" colnum="3" colwidth="25*"/>
        <thead>
        <row>
            <entry colname="COLSPEC0" valign="top">$utils.getText("general.short.asset-name")</entry>
            <entry colname="COLSPEC1" valign="top">$utils.getText("general.short.asset-type")</entry>
            <entry colname="COLSPEC1" valign="top">$utils.getText("general.short.asset-version")</entry>
        </row>
        </thead>
        <tbody>
          #foreach($asset in $assets)
          <row>
              <entry>
                #if($report.isAssetBomReportEnabled())
                    <xref href="$registry.resolve($templateRegistry, "asset-$report.xmlEscapeStringAttribute($asset)")" type="topic">
                      $report.xmlEscapeString($asset.get("Name"))
                    </xref>
                #else
                  $report.xmlEscapeString($asset.get("Name"))
                #end
              </entry>
              <entry>$report.xmlEscapeString($asset.get("Type"))</entry>
              <entry>
                  <codeph>$report.xmlEscapeGAV($asset.get("Version"))</codeph>
              </entry>
          </row>
          #end
        </tbody>
    </tgroup>
</table>
#end
#macro(artifactsTable $templateRegistry $componentNotice $artifactNotice)
<title>$utils.getText(
  "inventory-report-bom.short.artifacts-of-component") $report.xmlEscapeString($componentNotice.getComponentName())</title>
<table otherprops="wide">
    <title>$utils.getText(
      "inventory-report-bom.short.artifacts-of-component") $componentNotice.getComponentName()$reportContext.inContextOf()$artifactNotice.getDiscriminator()</title>
    <tgroup cols="3">
        <colspec colname="COLSPEC0" colnum="1" colwidth="50*"/>
        <colspec colname="COLSPEC1" colnum="2" colwidth="15*"/>
        <colspec colname="COLSPEC2" colnum="3" colwidth="35*"/>
        <thead>
        <row>
            <entry colname="COLSPEC0" valign="top">$utils.getText("general.short.artifacts") / $utils.getText(
              "general.short.packages") / $utils.getText("general.short.web-modules") </entry>
            <entry colname="COLSPEC1" valign="top">Version</entry>
            <entry colname="COLSPEC1" valign="top">$utils.getText(
              "inventory-report-bom.short.effective-licenses")</entry>
        </row>
        </thead>
        <tbody>
          #foreach($artifact in $artifactNotice.getArtifacts())
          <row>
              <entry>#if($artifact.getGroupId())
                  <lines>
                      <line><i>$artifact.getGroupId() / $artifact.getArtifactId()</i></line>
                      <line>
                          <codeph>$report.xmlEscapeArtifactId($artifact.getId())</codeph>
                      </line>
                  </lines>#else
                  <codeph>$report.xmlEscapeArtifactId($artifact.getId())</codeph>#end
              </entry>
              <entry>
                  <codeph>$report.xmlEscapeGAV($artifact.getVersion())</codeph>
              </entry>
            #set($licenses=$inventory.getEffectiveLicenses($artifact))
            #set($licensesAsString=$inventory.getEffectiveLicense($artifact))
            #if($licenses.isEmpty())
                <entry>&nbsp;</entry>
            #else
                <entry>
                  ## preserve formating to achive proper line-breaks
                    <lines>#foreach($license in $licenses)#if($licensesInEffect.contains($license))<xref href="$registry.resolve($templateRegistry, "effective-license-$inventory.deriveLicenseId($license)")" type="topic">$report.xmlEscapeLicense($license)</xref>
                    #else$report.xmlEscapeLicense($license)
                    #end#end</lines>
                </entry>
            #end
          </row>
          #end
        </tbody>
    </tgroup>
</table>
#end
